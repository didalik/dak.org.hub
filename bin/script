#!/bin/bash

validate_args () { # authorization {{{1
  err "+ $HOSTNAME $0 started on $(date) with $# args: $@" >&2
  local auth=$1 kind=$2
  case $auth in
    request)
      case $kind in
        devhub|tophub) request $kind;;
        script) return;; # TODO implement
        *) return 2
      esac;;
    approval)
      validate_hub;;
    *) return 1
  esac
}

# }}}1

. build/util.sh
. $HOME/.ssh/.$HOSTNAME.env

cat $1
exit

validate_args $@ || exit
